<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://github.com/altunenes/scramblery/api_reference/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>API - scramblery</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "API";
        var mkdocs_page_input_path = "api_reference.md";
        var mkdocs_page_url = "/altunenes/scramblery/api_reference/";
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> scramblery
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../userguide/">User Guide</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="./">API</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#updates">Updates</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#function-documentation">Function Documentation</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#scrambleface">scrambleface</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#scrambleimage">scrambleimage</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#scramblevideo">scramblevideo</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#usage-examples">Usage Examples</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#fourier-scrambling">Fourier Scrambling</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#enhanced-video-scrambling">Enhanced Video Scrambling</a>
    </li>
        </ul>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../scramblerydemo.html">demo</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../magic.html">animation</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../pixeldance.html">animation2</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">scramblery</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" alt="Docs"></a> &raquo;</li>
      <li>API</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="scramblery-functions-in-python">Scramblery Functions in Python</h1>
<p>Maintained by: @altunenes</p>
<p>This document outlines the updated functionalities of the Scramblery library, including the newly introduced Fourier scrambling technique and the enhancements made to the video scrambling function.</p>
<h2 id="updates">Updates</h2>
<ol>
<li>
<p><strong>Fourier Scrambling</strong>: A novel method for image scrambling that operates in the frequency domain. Unlike traditional scrambling methods that shuffle pixel values or coordinates, Fourier scrambling randomizes the phase information of the image's Fourier transform, thereby disrupting the image's structure while preserving its energy distribution. This method is particularly potent for applications requiring non-reversible image transformations without a significant loss of information content (e.g., privacy preservation, data anonymization).</p>
</li>
<li>
<p><strong>Video Scrambling Enhancements</strong>: The <code>scramblevideo</code> function has been overhauled to provide more flexibility and control over the scrambling process. Users can now specify detailed scrambling settings, allowing for different scrambling techniques to be applied throughout a video sequence. This feature is crucial for researchers and practitioners working with video data, where consistent scrambling parameters are necessary across frames.</p>
</li>
</ol>
<h2 id="function-documentation">Function Documentation</h2>
<h3 id="scrambleface"><code>scrambleface</code></h3>
<pre><code class="language-python">def scrambleface(img, splits, type, seamless=False, bg=True, seed=None, write=True, scramble_ratio=1.0):
    &quot;&quot;&quot;
Scramble the facial area of the image.

Args:
    img: input image path or image array
    splits: number of splits to perform, works differently between square and stack splits
    type: type of split, &quot;pixel&quot;, &quot;stack&quot;, or &quot;fourier&quot;. Stack works with pixel coordinates, square works with pixel values
    seamless: if True, uses seamlessClone to blend the scrambled face with the original image
    bg: if True, uses the background of the original image, if False, replaces the background with a gray color
    seed: seed for random number generator (default: None)
    write: if True, writes the output image to disk, if False, returns the output image
    scramble_ratio: the power of Fourier scrambling (default: 1.0)

Usage:
    scrambleface(&quot;image.png&quot;, 10, &quot;fourier&quot;, False, True, None, True, 0.5)
    &quot;&quot;&quot;
</code></pre>
<h3 id="scrambleimage"><code>scrambleimage</code></h3>
<pre><code class="language-python">def scrambleimage(image_path, x_block=10, y_block=10, scramble_type='classic', seed=None, write=True, **kwargs):
    &quot;&quot;&quot;
Main function to scramble an image based on the specified scramble type.

Args:
    image_path: Path to the input image (with extension).
    x_block: Number of splits in x-axis.
    y_block: Number of splits in y-axis.
    scramble_type: Type of split; valid values are &quot;classic&quot;, &quot;pixel&quot;, &quot;withinblocks&quot;, &quot;rotate&quot;, &quot;colormap&quot;, &quot;gradient&quot;, &quot;fourier&quot;.
    seed: Seed for random number generator (default: None).
    write: Write the image to disk (default: True).
    **kwargs: Additional keyword arguments specific to scramble types.

Returns:
    If write is True, writes the scrambled image to disk.
    If write is False, returns the scrambled image.

Raises:
    ValueError: If an invalid scramble_type is provided or image cannot be read.
    FileNotFoundError: If the image_path does not exist.
    &quot;&quot;&quot;
</code></pre>
<h3 id="scramblevideo"><code>scramblevideo</code></h3>
<pre><code class="language-python">def scramblevideo(input_video_path, output_video_path=None, scramble_settings=None):
    &quot;&quot;&quot;
Scramble the facial area in a video.

Args:
    input_video_path: Path to the input video.
    splits: Number of splits to perform on the face.
    output_video_path: Path where the output video will be saved (if None, the video won't be saved).
    scramble_settings: Dictionary of settings for the scrambleface function.

Usage:
    scramblevideo(&quot;input_video.mp4&quot;, 10, &quot;output_video.mp4&quot;, scramble_settings)
    &quot;&quot;&quot;
</code></pre>
<h2 id="usage-examples">Usage Examples</h2>
<h3 id="fourier-scrambling">Fourier Scrambling</h3>
<p>The <code>scrambleface</code> and <code>scrambleimage</code> functions now support Fourier scrambling, a method that disrupts the image's visual content without altering its energy spectrum significantly. This technique is particularly useful in situations where the image's overall energy distribution must be maintained for subsequent processing steps (e.g., deep learning applications) or for privacy-preserving transformations.</p>
<pre><code class="language-python">from scramblery import scrambleface, scrambleimage

# Scramble the face in the image using the Fourier method
scrambled_face = scrambleface(&quot;face.jpg&quot;, splits=10, type=&quot;fourier&quot;, scramble_ratio=0.7, write=False)

# Scramble the entire image using the Fourier method
scrambled_image = scrambleimage(&quot;image.jpg&quot;, scramble_type=&quot;fourier&quot;, scramble_ratio=0.5, write=False)
</code></pre>
<h3 id="enhanced-video-scrambling">Enhanced Video Scrambling</h3>
<p>The updated <code>scramblevideo</code> function allows for more granular control over the video scrambling process, with the ability to specify detailed settings for the <code>scrambleface</code> function used internally. This update is particularly beneficial for use cases requiring consistent scrambling effects across different video frames or varied scrambling intensities throughout a video sequence.</p>
<pre><code class="language-python">from scramblery import scramblevideo

# Define custom settings for the video scrambling process
scramble_settings = {
    'splits': 20,
    'type': 'fourier',
    'scramble_ratio': 0.6,
    'seamless': True,
    'bg': False
}

# Apply scrambling to a video file
scramblevideo(&quot;input_video.mp4&quot;, &quot;output_scrambled_video.mp4&quot;, scramble_settings)
</code></pre>
<hr />
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../userguide/" class="btn btn-neutral float-left" title="User Guide"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../scramblerydemo.html" class="btn btn-neutral float-right" title="demo">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../userguide/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../scramblerydemo.html" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
